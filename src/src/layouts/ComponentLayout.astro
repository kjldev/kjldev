---
import Layout from './Layout.astro';
import ComponentStatus from '../components/components/ComponentStatus.astro';
import ComponentTag from '../components/components/ComponentTag.astro';
import ComponentLink from '../components/components/ComponentLink.astro';
import { type Component } from '../scripts/component-types';

const { frontmatter, filePath } = Astro.props as {
	frontmatter: Component;
	filePath: string;
};

const fileName = filePath.split('/').pop() || '';
const githubRef = `https://github.com/kjldev/kjldev/tree/main/src/${filePath}`;

const urlTitle = encodeURIComponent(`I'd like to chat about '${frontmatter.title}': ${fileName}`);
const body = encodeURIComponent(`Hi,

I'd like to chat about the component **${frontmatter.title}**.

Component: [${fileName}](${githubRef})

-----

## Description

_What would you like to talk about?_
`);

const newGitHubIssues = `https://github.com/kjldev/kjldev/issues/new?title=${urlTitle}&body=${body}&labels=component,${frontmatter.status.toLowerCase()}`;
---

<Layout title={frontmatter.title}>
	<div class='max-w-screen-lg mx-auto p-4'>
		<div class='mb-4'>
			<a
				href="/components"
				class="inline-block px-4 py-2 bg-gradient-to-r from-gray-700 to-gray-900 text-white font-semibold rounded-full shadow-sm hover:shadow-md transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400"
			>
				&larr; Back to Components
			</a>
		</div>

		<h1 class='text-3xl font-bold mb-6'>{frontmatter.title}</h1>

		<div class='mb-2'>
			<ComponentStatus
				status={frontmatter.status}
				large
			/>
		</div>

		{
			frontmatter.description && (
				<p class='italic mb-6'>{frontmatter.description}</p>
			)
		}

		{
			frontmatter.links && (
				<div class='mb-6 flex flex-wrap gap-2'>
					{frontmatter.links.map((link) => (
						<ComponentLink link={link} />
					))}
				</div>
			)
		}

		{
			frontmatter.tags && frontmatter.tags.length > 0 && (
				<div class='mb-6 flex flex-wrap gap-2'>
					{frontmatter.tags.map((tag) => (
						<ComponentTag tag={tag} />
					))}
				</div>
			)
		}

		<slot />

		<div class="flex mt-6">
			<a
				href={newGitHubIssues}
				target="_blank"
				class="block w-full sm:inline-block sm:w-auto px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold rounded-full shadow-lg hover:from-blue-600 hover:to-purple-600 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400 mx-auto text-center"
			>
				 ðŸ’¬ What to chat about this?
			</a>
		</div>
	</div>
</Layout>

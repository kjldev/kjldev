---
import Layout from './Layout.astro';
import ProjectStatus from '../components/projects/ProjectStatus.astro';
import ProjectTag from '../components/projects/ProjectTag.astro';
import ProjectLink from '../components/projects/ProjectLink.astro';
import ProjectDiscussionLink from '../components/projects/ProjectDiscussionLink.astro';
import { type Project } from '../scripts/component-types';

const { frontmatter, filePath } = Astro.props as {
	frontmatter: Project;
	filePath: string;
};
---

<Layout title={frontmatter.title}>
	<div class='max-w-screen-lg mx-auto p-4'>
		<div class='mb-4'>
			<a
				href='/projects'
				class='inline-block px-4 py-2 bg-gradient-to-r from-gray-700 to-gray-900 text-white font-semibold rounded-full shadow-sm hover:shadow-md transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400'
			>
				&larr; Back to Projects
			</a>
		</div>

		<h1 class='text-3xl font-bold mb-6'>{frontmatter.title}</h1>

		<div class='mb-2'>
			<ProjectStatus
				status={frontmatter.status}
				large
			/>
			<ProjectDiscussionLink
				title={frontmatter.title}
				status={frontmatter.status}
				filePath={filePath}
				variant='chat'
			/>
		</div>

		{
			frontmatter.description && (
				<p class='italic mb-6'>{frontmatter.description}</p>
			)
		}

		{
			frontmatter.links && (
				<div class='mb-6 flex flex-wrap gap-2'>
					{frontmatter.links.map((link) => (
						<ProjectLink link={link} />
					))}
				</div>
			)
		}

		{
			frontmatter.tags && frontmatter.tags.length > 0 && (
				<div class='mb-6 flex flex-wrap gap-2'>
					{frontmatter.tags.map((tag) => (
						<ProjectTag tag={tag} />
					))}
				</div>
			)
		}

		<slot />

		<div class='flex mt-6'>
			<ProjectDiscussionLink
				title={frontmatter.title}
				status={frontmatter.status}
				filePath={filePath}
			/>
		</div>
	</div>
</Layout>
